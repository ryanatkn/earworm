var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,u=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&c(e,n,t[n]);return e},o=(e,r)=>t(e,n(r)),a=(e,t)=>{var n={};for(var c in e)l.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&r)for(var c of r(e))t.indexOf(c)<0&&s.call(e,c)&&(n[c]=e[c]);return n};import{S as i,i as m,s as p,e as d,k as f,t as $,c as h,a as v,n as g,g as y,d as _,b,f as T,F as x,I as E,H as w,J as O,K as N,j as q,m as U,o as k,x as I,u as A,v as D,L as P,D as V,G as B,M as L,r as M,w as j,l as S,N as z,h as R,C,O as G,P as F,Q as H,R as K,T as Y,U as J}from"../chunks/vendor-fafe7c48.js";const Q=e=>Math.pow(e,2.2);function W(e){let t;return{c(){t=$("🔊")},l(e){t=y(e,"🔊")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function X(e){let t;return{c(){t=$("🔇")},l(e){t=y(e,"🔇")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function Z(e){let t,n,r,l,s,c,u,o,a,i,m,p,N,q;function U(e,t){return e[1]?X:W}let k=U(e),I=k(e);return{c(){t=d("div"),n=d("label"),r=d("input"),s=f(),c=d("span"),u=$("%"),o=f(),a=d("label"),i=d("input"),m=f(),p=d("button"),I.c(),this.h()},l(e){t=h(e,"DIV",{class:!0});var l=v(t);n=h(l,"LABEL",{});var d=v(n);r=h(d,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),s=g(d),c=h(d,"SPAN",{class:!0});var f=v(c);u=y(f,"%"),f.forEach(_),d.forEach(_),o=g(l),a=h(l,"LABEL",{});var $=v(a);i=h($,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),$.forEach(_),m=g(l),p=h(l,"BUTTON",{type:!0});var b=v(p);I.l(b),b.forEach(_),l.forEach(_),this.h()},h(){b(r,"class","percent svelte-1hal7dz"),b(r,"type","number"),r.value=l=Math.round(100*e[0]),b(r,"step","1"),b(r,"min","0"),b(r,"max","100"),b(c,"class","label-text"),b(i,"type","range"),b(i,"min",0),b(i,"max",1),b(i,"step",.01),i.value=e[0],b(i,"class","svelte-1hal7dz"),b(p,"type","button"),b(t,"class","volume-control svelte-1hal7dz")},m(l,d){T(l,t,d),x(t,n),x(n,r),x(n,s),x(n,c),x(c,u),x(t,o),x(t,a),x(a,i),x(t,m),x(t,p),I.m(p,null),N||(q=[E(r,"input",e[5]),E(i,"input",e[6]),E(p,"click",e[7])],N=!0)},p(e,[t]){1&t&&l!==(l=Math.round(100*e[0]))&&(r.value=l),1&t&&(i.value=e[0]),k!==(k=U(e))&&(I.d(1),I=k(e),I&&(I.c(),I.m(p,null)))},i:w,o:w,d(e){e&&_(t),I.d(),N=!1,O(q)}}}function ee(e,t,n){let{volume:r}=t,{muted:l}=t,{set_volume:s}=t,{mute:c}=t,{unmute:u}=t;return e.$$set=e=>{"volume"in e&&n(0,r=e.volume),"muted"in e&&n(1,l=e.muted),"set_volume"in e&&n(2,s=e.set_volume),"mute"in e&&n(3,c=e.mute),"unmute"in e&&n(4,u=e.unmute)},[r,l,s,c,u,e=>s(Number(e.currentTarget.value)/100),e=>s(Number(e.currentTarget.value)),()=>l?u():c()]}class te extends i{constructor(e){super(),m(this,e,ee,Z,p,{volume:0,muted:1,set_volume:2,mute:3,unmute:4})}}function ne(e){let t;return{c(){t=$("⇔")},l(e){t=y(e,"⇔")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function re(e){let t;return{c(){t=$("⇒")},l(e){t=y(e,"⇒")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function le(e){let t;return{c(){t=$("⇐")},l(e){t=y(e,"⇐")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function se(e){let t,n,r;function l(e,t){return-1===e[0]?le:1===e[0]?re:ne}let s=l(e),c=s(e);return{c(){t=d("button"),c.c()},l(e){t=h(e,"BUTTON",{});var n=v(t);c.l(n),n.forEach(_)},m(l,s){T(l,t,s),c.m(t,null),n||(r=E(t,"click",e[1]),n=!0)},p(e,[n]){s!==(s=l(e))&&(c.d(1),c=s(e),c&&(c.c(),c.m(t,null)))},i:w,o:w,d(e){e&&_(t),c.d(),n=!1,r()}}}function ce(e,t,n){let{pan:r}=t,{set_pan:l}=t;return e.$$set=e=>{"pan"in e&&n(0,r=e.pan),"set_pan"in e&&n(2,l=e.set_pan)},[r,()=>{l(-1===r?1:1===r?0:-1)},l]}class ue extends i{constructor(e){super(),m(this,e,ce,se,p,{pan:0,set_pan:2})}}function oe(e){let t,n,r,l,s,c,u,o,a;return{c(){t=d("label"),n=d("input"),r=f(),l=d("span"),s=$("hz"),c=f(),u=d("input"),this.h()},l(e){t=h(e,"LABEL",{});var o=v(t);n=h(o,"INPUT",{type:!0,min:!0,max:!0,step:!0}),r=g(o),l=h(o,"SPAN",{class:!0});var a=v(l);s=y(a,"hz"),a.forEach(_),o.forEach(_),c=g(e),u=h(e,"INPUT",{type:!0,min:!0,max:!0,step:!0}),this.h()},h(){b(n,"type","number"),b(n,"min",e[2]),b(n,"max",e[3]),b(n,"step",e[4]),n.value=e[0],b(l,"class","label-text"),b(u,"type","range"),b(u,"min",e[2]),b(u,"max",e[3]),b(u,"step",e[4]),u.value=e[0]},m(i,m){T(i,t,m),x(t,n),x(t,r),x(t,l),x(l,s),T(i,c,m),T(i,u,m),o||(a=[E(n,"input",e[5]),E(u,"input",e[6])],o=!0)},p(e,[t]){4&t&&b(n,"min",e[2]),8&t&&b(n,"max",e[3]),16&t&&b(n,"step",e[4]),1&t&&(n.value=e[0]),4&t&&b(u,"min",e[2]),8&t&&b(u,"max",e[3]),16&t&&b(u,"step",e[4]),1&t&&(u.value=e[0])},i:w,o:w,d(e){e&&_(t),e&&_(c),e&&_(u),o=!1,O(a)}}}function ae(e,t,n){let{frequency:r}=t,{set_frequency:l}=t,{min:s=60}=t,{max:c=880}=t,{step:u=1}=t;return e.$$set=e=>{"frequency"in e&&n(0,r=e.frequency),"set_frequency"in e&&n(1,l=e.set_frequency),"min"in e&&n(2,s=e.min),"max"in e&&n(3,c=e.max),"step"in e&&n(4,u=e.step)},[r,l,s,c,u,e=>l(Number(e.currentTarget.value)),e=>l(Number(e.currentTarget.value))]}class ie extends i{constructor(e){super(),m(this,e,ae,oe,p,{frequency:0,set_frequency:1,min:2,max:3,step:4})}}function me(e){let t;return{c(){t=$("▶️")},l(e){t=y(e,"▶️")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function pe(e){let t;return{c(){t=$("⏸︎")},l(e){t=y(e,"⏸︎")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function de(e){let t,n,r;function l(e,t){return e[0]?pe:me}let s=l(e),c=s(e);return{c(){t=d("button"),c.c(),this.h()},l(e){t=h(e,"BUTTON",{});var n=v(t);c.l(n),n.forEach(_),this.h()},h(){N(t,"selected",e[0])},m(l,s){T(l,t,s),c.m(t,null),n||(r=E(t,"click",e[3]),n=!0)},p(e,[n]){s!==(s=l(e))&&(c.d(1),c=s(e),c&&(c.c(),c.m(t,null))),1&n&&N(t,"selected",e[0])},i:w,o:w,d(e){e&&_(t),c.d(),n=!1,r()}}}function fe(e,t,n){let{playing:r}=t,{play:l}=t,{pause:s}=t;return e.$$set=e=>{"playing"in e&&n(0,r=e.playing),"play"in e&&n(1,l=e.play),"pause"in e&&n(2,s=e.pause)},[r,l,s,()=>r?s():l()]}class $e extends i{constructor(e){super(),m(this,e,fe,de,p,{playing:0,play:1,pause:2})}}function he(e){let t,n,r,l;return t=new $e({props:{playing:e[2].playing,play:e[0].play,pause:e[0].pause}}),r=new ie({props:{frequency:e[3].frequency,set_frequency:e[1].set_frequency}}),{c(){q(t.$$.fragment),n=f(),q(r.$$.fragment)},l(e){U(t.$$.fragment,e),n=g(e),U(r.$$.fragment,e)},m(e,s){k(t,e,s),T(e,n,s),k(r,e,s),l=!0},p(e,[n]){const l={};4&n&&(l.playing=e[2].playing),1&n&&(l.play=e[0].play),1&n&&(l.pause=e[0].pause),t.$set(l);const s={};8&n&&(s.frequency=e[3].frequency),2&n&&(s.set_frequency=e[1].set_frequency),r.$set(s)},i(e){l||(I(t.$$.fragment,e),I(r.$$.fragment,e),l=!0)},o(e){A(t.$$.fragment,e),A(r.$$.fragment,e),l=!1},d(e){D(t,e),e&&_(n),D(r,e)}}}function ve(e,t,n){let r,l,s=w,c=()=>(s(),s=P(a,(e=>n(2,r=e))),a),u=w,o=()=>(u(),u=P(i,(e=>n(3,l=e))),i);e.$$.on_destroy.push((()=>s())),e.$$.on_destroy.push((()=>u()));let{input_channel:a}=t;c();let{input_source:i}=t;return o(),e.$$set=e=>{"input_channel"in e&&c(n(0,a=e.input_channel)),"input_source"in e&&o(n(1,i=e.input_source))},[a,i,r,l]}class ge extends i{constructor(e){super(),m(this,e,ve,he,p,{input_channel:0,input_source:1})}}function ye(e){let t,n;return{c(){t=d("div"),n=$("❌"),this.h()},l(e){t=h(e,"DIV",{class:!0});var r=v(t);n=y(r,"❌"),r.forEach(_),this.h()},h(){b(t,"class","off svelte-1w1irkc")},m(e,r){T(e,t,r),x(t,n)},d(e){e&&_(t)}}}function _e(e){let t,n,r,l,s,c,u,o=!e[0]&&ye();const a=e[4].default,i=V(a,e,e[3],null);return{c(){t=d("button"),n=d("div"),r=$("🎙️\n\t\t"),o&&o.c(),l=f(),i&&i.c(),this.h()},l(e){t=h(e,"BUTTON",{});var s=v(t);n=h(s,"DIV",{class:!0});var c=v(n);r=y(c,"🎙️\n\t\t"),o&&o.l(c),c.forEach(_),l=g(s),i&&i.l(s),s.forEach(_),this.h()},h(){b(n,"class","icon svelte-1w1irkc"),N(t,"selected",e[0])},m(a,m){T(a,t,m),x(t,n),x(n,r),o&&o.m(n,null),x(t,l),i&&i.m(t,null),s=!0,c||(u=E(t,"click",e[5]),c=!0)},p(e,[r]){e[0]?o&&(o.d(1),o=null):o||(o=ye(),o.c(),o.m(n,null)),i&&i.p&&(!s||8&r)&&B(i,a,e,e[3],s?r:-1,null,null),1&r&&N(t,"selected",e[0])},i(e){s||(I(i,e),s=!0)},o(e){A(i,e),s=!1},d(e){e&&_(t),o&&o.d(),i&&i.d(e),c=!1,u()}}}function be(e,t,n){let{$$slots:r={},$$scope:l}=t,{recording:s}=t,{start:c}=t,{stop:u}=t;return e.$$set=e=>{"recording"in e&&n(0,s=e.recording),"start"in e&&n(1,c=e.start),"stop"in e&&n(2,u=e.stop),"$$scope"in e&&n(3,l=e.$$scope)},[s,c,u,l,r,()=>s?u():c()]}class Te extends i{constructor(e){super(),m(this,e,be,_e,p,{recording:0,start:1,stop:2})}}function xe(e){let t;return{c(){t=$("[[mic controls]]")},l(e){t=y(e,"[[mic controls]]")},m(e,n){T(e,t,n)},p:w,i:w,o:w,d(e){e&&_(t)}}}class Ee extends i{constructor(e){super(),m(this,e,null,xe,p,{})}}function we(e){let t,n,r,l;return t=new Te({props:{recording:e[1].playing,start:e[0].play,stop:e[0].pause}}),r=new Ee({}),{c(){q(t.$$.fragment),n=f(),q(r.$$.fragment)},l(e){U(t.$$.fragment,e),n=g(e),U(r.$$.fragment,e)},m(e,s){k(t,e,s),T(e,n,s),k(r,e,s),l=!0},p(e,[n]){const r={};2&n&&(r.recording=e[1].playing),1&n&&(r.start=e[0].play),1&n&&(r.stop=e[0].pause),t.$set(r)},i(e){l||(I(t.$$.fragment,e),I(r.$$.fragment,e),l=!0)},o(e){A(t.$$.fragment,e),A(r.$$.fragment,e),l=!1},d(e){D(t,e),e&&_(n),D(r,e)}}}function Oe(e,t,n){let r,l=w,s=()=>(l(),l=P(c,(e=>n(1,r=e))),c);e.$$.on_destroy.push((()=>l()));let{input_channel:c}=t;s();let{input_source:u}=t;return e.$$set=e=>{"input_channel"in e&&s(n(0,c=e.input_channel)),"input_source"in e&&n(2,u=e.input_source)},[c,r,u]}class Ne extends i{constructor(e){super(),m(this,e,Oe,we,p,{input_channel:0,input_source:2})}}function qe(e){let t;return{c(){t=$("TODO select input source")},l(e){t=y(e,"TODO select input source")},m(e,n){T(e,t,n)},p:w,i:w,o:w,d(e){e&&_(t)}}}function Ue(e){let t,n,r,l;const s=[Ie,ke],c=[];function u(e,t){return"oscillator"===e[3].type?0:"mic"===e[3].type?1:-1}return~(t=u(e))&&(n=c[t]=s[t](e)),{c(){n&&n.c(),r=S()},l(e){n&&n.l(e),r=S()},m(e,n){~t&&c[t].m(e,n),T(e,r,n),l=!0},p(e,l){let o=t;t=u(e),t===o?~t&&c[t].p(e,l):(n&&(M(),A(c[o],1,1,(()=>{c[o]=null})),j()),~t?(n=c[t],n?n.p(e,l):(n=c[t]=s[t](e),n.c()),I(n,1),n.m(r.parentNode,r)):n=null)},i(e){l||(I(n),l=!0)},o(e){A(n),l=!1},d(e){~t&&c[t].d(e),e&&_(r)}}}function ke(e){let t,n;return t=new Ne({props:{input_channel:e[0],input_source:e[3]}}),{c(){q(t.$$.fragment)},l(e){U(t.$$.fragment,e)},m(e,r){k(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.input_channel=e[0]),8&n&&(r.input_source=e[3]),t.$set(r)},i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){A(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Ie(e){let t,n;return t=new ge({props:{input_channel:e[0],input_source:e[3]}}),{c(){q(t.$$.fragment)},l(e){U(t.$$.fragment,e)},m(e,r){k(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.input_channel=e[0]),8&n&&(r.input_source=e[3]),t.$set(r)},i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){A(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Ae(e){let t,n,r,l;return{c(){t=d("button"),n=$("✖")},l(e){t=h(e,"BUTTON",{});var r=v(t);n=y(r,"✖"),r.forEach(_)},m(s,c){T(s,t,c),x(t,n),r||(l=E(t,"click",(function(){L(e[1])&&e[1].apply(this,arguments)})),r=!0)},p(t,n){e=t},d(e){e&&_(t),r=!1,l()}}}function De(e){let t,n,r,l,s,c,u,o,a,i,m,p,$,y,w;s=new te({props:{volume:e[2].volume,muted:e[2].muted,set_volume:e[0].set_volume,mute:e[0].mute,unmute:e[0].unmute}});const O=[Ue,qe],N=[];function P(e,t){return e[3]?0:1}o=P(e),a=N[o]=O[o](e),m=new ue({props:{pan:e[2].pan,set_pan:e[0].set_pan}});let V=e[1]&&Ae(e);return{c(){t=d("div"),n=d("input"),l=f(),q(s.$$.fragment),c=f(),u=d("div"),a.c(),i=f(),q(m.$$.fragment),p=f(),V&&V.c(),this.h()},l(e){t=h(e,"DIV",{class:!0});var r=v(t);n=h(r,"INPUT",{type:!0,class:!0}),l=g(r),U(s.$$.fragment,r),c=g(r),u=h(r,"DIV",{class:!0});var o=v(u);a.l(o),o.forEach(_),i=g(r),U(m.$$.fragment,r),p=g(r),V&&V.l(r),r.forEach(_),this.h()},h(){b(n,"type","text"),b(n,"class","name svelte-11906we"),n.value=r=e[2].name,b(u,"class","source-controls svelte-11906we"),b(t,"class","item svelte-11906we")},m(r,a){T(r,t,a),x(t,n),x(t,l),k(s,t,null),x(t,c),x(t,u),N[o].m(u,null),x(t,i),k(m,t,null),x(t,p),V&&V.m(t,null),$=!0,y||(w=E(n,"input",e[4]),y=!0)},p(e,[l]){(!$||4&l&&r!==(r=e[2].name)&&n.value!==r)&&(n.value=r);const c={};4&l&&(c.volume=e[2].volume),4&l&&(c.muted=e[2].muted),1&l&&(c.set_volume=e[0].set_volume),1&l&&(c.mute=e[0].mute),1&l&&(c.unmute=e[0].unmute),s.$set(c);let i=o;o=P(e),o===i?N[o].p(e,l):(M(),A(N[i],1,1,(()=>{N[i]=null})),j(),a=N[o],a?a.p(e,l):(a=N[o]=O[o](e),a.c()),I(a,1),a.m(u,null));const p={};4&l&&(p.pan=e[2].pan),1&l&&(p.set_pan=e[0].set_pan),m.$set(p),e[1]?V?V.p(e,l):(V=Ae(e),V.c(),V.m(t,null)):V&&(V.d(1),V=null)},i(e){$||(I(s.$$.fragment,e),I(a),I(m.$$.fragment,e),$=!0)},o(e){A(s.$$.fragment,e),A(a),A(m.$$.fragment,e),$=!1},d(e){e&&_(t),D(s),N[o].d(),D(m),V&&V.d(),y=!1,w()}}}function Pe(e,t,n){let r,l=w,s=()=>(l(),l=P(c,(e=>n(2,r=e))),c);e.$$.on_destroy.push((()=>l()));let{input_channel:c}=t;s();let u,{remove:o=null}=t;return e.$$set=e=>{"input_channel"in e&&s(n(0,c=e.input_channel)),"remove"in e&&n(1,o=e.remove)},e.$$.update=()=>{4&e.$$.dirty&&n(3,u=r.source)},[c,o,r,u,e=>c.set_name(e.currentTarget.value)]}class Ve extends i{constructor(e){super(),m(this,e,Pe,De,p,{input_channel:0,remove:1})}}function Be(e){let t,n;return{c(){t=d("a"),n=$("download"),this.h()},l(e){t=h(e,"A",{href:!0,target:!0,class:!0});var r=v(t);n=y(r,"download"),r.forEach(_),this.h()},h(){b(t,"href",e[3]),b(t,"target","_blank"),b(t,"class","svelte-nmo533")},m(e,r){T(e,t,r),x(t,n)},p(e,n){8&n&&b(t,"href",e[3])},d(e){e&&_(t)}}}function Le(e){let t,n,r,l;return{c(){t=d("button"),n=$("✖")},l(e){t=h(e,"BUTTON",{});var r=v(t);n=y(r,"✖"),r.forEach(_)},m(s,c){T(s,t,c),x(t,n),r||(l=E(t,"click",(function(){L(e[1])&&e[1].apply(this,arguments)})),r=!0)},p(t,n){e=t},d(e){e&&_(t),r=!1,l()}}}function Me(e){let t,n,r,l,s,c,u,o,a,i,m,p,O,N,q,U=e[3]&&Be(e),k=e[1]&&Le(e);return{c(){t=d("div"),n=d("input"),r=f(),l=d("audio"),s=$("Your browser does not support the "),c=d("code"),u=$("audio"),o=$(" element.\n\t\t"),a=d("track"),p=f(),U&&U.c(),O=f(),k&&k.c(),this.h()},l(e){t=h(e,"DIV",{class:!0});var i=v(t);n=h(i,"INPUT",{type:!0,class:!0}),r=g(i),l=h(i,"AUDIO",{src:!0});var m=v(l);s=y(m,"Your browser does not support the "),c=h(m,"CODE",{});var d=v(c);u=y(d,"audio"),d.forEach(_),o=y(m," element.\n\t\t"),a=h(m,"TRACK",{kind:!0}),m.forEach(_),p=g(i),U&&U.l(i),O=g(i),k&&k.l(i),i.forEach(_),this.h()},h(){b(n,"type","text"),b(n,"class","name svelte-nmo533"),b(a,"kind","captions"),l.controls=i=!!e[2].blob,l.src!==(m=e[3])&&b(l,"src",m),b(t,"class","item svelte-nmo533")},m(i,m){T(i,t,m),x(t,n),z(n,e[2].name),x(t,r),x(t,l),x(l,s),x(l,c),x(c,u),x(l,o),x(l,a),x(t,p),U&&U.m(t,null),x(t,O),k&&k.m(t,null),N||(q=E(n,"input",e[5]),N=!0)},p(e,[r]){4&r&&n.value!==e[2].name&&z(n,e[2].name),4&r&&i!==(i=!!e[2].blob)&&(l.controls=i),8&r&&l.src!==(m=e[3])&&b(l,"src",m),e[3]?U?U.p(e,r):(U=Be(e),U.c(),U.m(t,O)):U&&(U.d(1),U=null),e[1]?k?k.p(e,r):(k=Le(e),k.c(),k.m(t,null)):k&&(k.d(1),k=null)},i:w,o:w,d(e){e&&_(t),U&&U.d(),k&&k.d(),N=!1,q()}}}function je(e,t,n){let r,l=w,s=()=>(l(),l=P(c,(e=>n(2,r=e))),c);e.$$.on_destroy.push((()=>l()));let{clip:c}=t;s();let u,o,{remove:a=null}=t;return e.$$set=e=>{"clip"in e&&s(n(0,c=e.clip)),"remove"in e&&n(1,a=e.remove)},e.$$.update=()=>{20&e.$$.dirty&&r.blob!==u&&(n(4,u=r.blob),n(3,o=r.blob?URL.createObjectURL(r.blob):void 0))},[c,a,r,o,u,function(){r.name=this.value,c.set(r)}]}class Se extends i{constructor(e){super(),m(this,e,je,Me,p,{clip:0,remove:1})}}function ze(e){let t;return{c(){t=$("turn on mic")},l(e){t=y(e,"turn on mic")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function Re(e){let t;return{c(){t=$("turn off mic")},l(e){t=y(e,"turn off mic")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function Ce(e){let t;function n(e,t){return e[1]?Re:ze}let r=n(e),l=r(e);return{c(){l.c(),t=S()},l(e){l.l(e),t=S()},m(e,n){l.m(e,n),T(e,t,n)},p(e,s){r!==(r=n(e))&&(l.d(1),l=r(e),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&_(t)}}}function Ge(e){let t,n;return{c(){t=d("div"),n=$(e[0]),this.h()},l(r){t=h(r,"DIV",{class:!0});var l=v(t);n=y(l,e[0]),l.forEach(_),this.h()},h(){b(t,"class","error svelte-1k0qods")},m(e,r){T(e,t,r),x(t,n)},p(e,t){1&t&&R(n,e[0])},d(e){e&&_(t)}}}function Fe(e){let t,n,r,l;t=new Te({props:{recording:e[1],start:e[2],stop:e[3],$$slots:{default:[Ce]},$$scope:{ctx:e}}});let s=e[0]&&Ge(e);return{c(){q(t.$$.fragment),n=f(),s&&s.c(),r=S()},l(e){U(t.$$.fragment,e),n=g(e),s&&s.l(e),r=S()},m(e,c){k(t,e,c),T(e,n,c),s&&s.m(e,c),T(e,r,c),l=!0},p(e,[n]){const l={};2&n&&(l.recording=e[1]),34&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l),e[0]?s?s.p(e,n):(s=Ge(e),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},i(e){l||(I(t.$$.fragment,e),l=!0)},o(e){A(t.$$.fragment,e),l=!1},d(e){D(t,e),e&&_(n),s&&s.d(e),e&&_(r)}}}function He(e,t,n){let r,{mic_stream:l=null}=t,s=null;return e.$$set=e=>{"mic_stream"in e&&n(4,l=e.mic_stream)},e.$$.update=()=>{16&e.$$.dirty&&n(1,r=!!l)},[s,r,async()=>{n(0,s=null);try{n(4,l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}))}catch(e){n(0,s=`Failed to get mic input: ${e}`)}},()=>{if(l){for(const e of l.getTracks())console.log("stopping track",e),e.stop();n(4,l=null)}},l]}class Ke extends i{constructor(e){super(),m(this,e,He,Fe,p,{mic_stream:4})}}const Ye=e=>{const t=(()=>{let e=0;return()=>++e})();return()=>`${e}_${t()}`},Je=Ye("audio_clip"),Qe=Ye("input_channel"),We=e=>{const t=(e=>{const t=Qe();return{id:t,name:e||t,source:null,destination:null,playing:!1,volume:.33,muted:!1,pan:0}})(),{subscribe:n,update:r}=C(t),l=e.createStereoPanner(),s=e.createGain();l.connect(s);const c=l,a=s,i={subscribe:n,set_name:e=>r((t=>o(u({},t),{name:e}))),connect:e=>r((t=>(t.destination&&a.disconnect(),e&&a.connect(e),o(u({},t),{destination:e})))),set_source:e=>r((t=>t.source===e?t:(t.source&&t.source.disconnect(),e&&e.connect(c),o(u({},t),{source:e})))),play:()=>r((e=>(e.source&&e.source.play(),o(u({},e),{playing:!0})))),pause:()=>r((e=>(e.source&&e.source.pause(),o(u({},e),{playing:!1})))),set_volume:t=>r((n=>(n.muted||s.gain.setValueAtTime(Q(t),e.currentTime),o(u({},n),{volume:t})))),mute:()=>r((t=>t.muted?t:(s.gain.setValueAtTime(0,e.currentTime),o(u({},t),{muted:!0})))),unmute:()=>r((t=>t.muted?(s.gain.setValueAtTime(Q(t.volume),e.currentTime),o(u({},t),{muted:!1})):t)),set_pan:t=>r((n=>(l.pan.setValueAtTime(t,e.currentTime),o(u({},n),{pan:t}))))};return i.set_volume(t.volume),i},Xe=(e,t,n,r)=>{const{subscribe:l,update:s,set:c}=C(t),a=e=>{e.node&&e.destination&&e.node.connect(e.destination)},i=e=>{e.node&&e.destination&&e.node.disconnect()};return{type:e,subscribe:l,update:s,set:c,set_name:e=>s((t=>o(u({},t),{name:e}))),connect:e=>s((t=>{i(t);const n=o(u({},t),{destination:e});return a(n),n})),disconnect:()=>s((e=>(i(e),o(u({},e),{destination:null})))),play:()=>s((e=>{if(e.playing)return e;const t=n(e);return t.node!==e.node&&(i(e),a(t)),o(u({},t),{playing:!0})})),pause:()=>s((e=>{if(!e.playing)return e;const t=r(e);return t.node!==e.node&&(i(e),a(t)),o(u({},t),{playing:!1})}))}},Ze=Ye("oscillator_source"),et=(e,t)=>{const n=(e=>{const t=Ze();return{id:t,name:e||t,destination:null,playing:!1,node:null,frequency:440}})(t),r=Xe("oscillator",n,(t=>{const n=e.createOscillator();return n.frequency.setValueAtTime(t.frequency,e.currentTime),n.start(),o(u({},t),{node:n})}),(e=>(e.node&&e.node.stop(),o(u({},e),{node:null})))),{update:l,set:s}=r,c=a(r,["update","set"]),i=o(u({},c),{set_frequency:t=>l((n=>(n.node&&n.node.frequency.setValueAtTime(t,e.currentTime),o(u({},n),{frequency:t}))))});return i.set_frequency(n.frequency),i},tt=Ye("mic_source"),nt=(e,t,n)=>{const r=Xe("mic",((e,t)=>{const n=tt();return{id:n,name:t||n,destination:null,playing:!1,node:null,mic_stream:e}})(t,n),(n=>o(u({},n),{node:e.createMediaStreamSource(t)})),(e=>o(u({},e),{node:null}))),{update:l,set:s}=r,c=a(r,["update","set"]);return u({},c)};function rt(e,t,n){const r=e.slice();return r[38]=t[n],r}function lt(e,t,n){const r=e.slice();return r[41]=t[n],r}function st(e){let t,n,r,l;return{c(){t=d("button"),n=$("enter the audio recording studio")},l(e){t=h(e,"BUTTON",{});var r=v(t);n=y(r,"enter the audio recording studio"),r.forEach(_)},m(s,c){T(s,t,c),x(t,n),r||(l=E(t,"click",e[14]),r=!0)},p:w,i:w,o:w,d(e){e&&_(t),r=!1,l()}}}function ct(e){let t,n,r,l,s,c,u,o,a,i,m,p,w,P,V,B,L,S,R,C,Y,Q,W,X,Z,ee,ne=[],re=new Map,le=[],se=new Map;function ce(e,t){return e[9]?ot:ut}let ue=ce(e),oe=ue(e);function ae(e,t){return e[10]?it:at}let ie=ae(e),me=ie(e);function pe(e,t){return e[11]?pt:mt}o=new te({props:{volume:e[5],muted:e[6],set_volume:e[13],mute:e[25],unmute:e[26]}});let de=pe(e),fe=de(e);function $e(t){e[29](t)}let he={};void 0!==e[4]&&(he.mic_stream=e[4]),S=new Ke({props:he}),G.push((()=>F(S,"mic_stream",$e)));let ve=e[1];const ge=e=>e[41];for(let d=0;d<ve.length;d+=1){let t=lt(e,ve,d),n=ge(t);re.set(n,ne[d]=dt(n,t))}let ye=e[7];const _e=e=>e[38];for(let d=0;d<ye.length;d+=1){let t=rt(e,ye,d),n=_e(t);se.set(n,le[d]=ft(n,t))}return{c(){t=d("div"),n=d("button"),oe.c(),l=f(),s=d("button"),me.c(),u=f(),q(o.$$.fragment),a=f(),i=d("label"),m=d("input"),p=f(),fe.c(),w=f(),P=d("div"),V=d("button"),B=$("🌊 add oscillator"),L=f(),q(S.$$.fragment),C=f(),Y=d("ul");for(let e=0;e<ne.length;e+=1)ne[e].c();Q=f(),W=d("ul");for(let e=0;e<le.length;e+=1)le[e].c();this.h()},l(e){t=h(e,"DIV",{class:!0});var r=v(t);n=h(r,"BUTTON",{});var c=v(n);oe.l(c),c.forEach(_),l=g(r),s=h(r,"BUTTON",{});var d=v(s);me.l(d),d.forEach(_),u=g(r),U(o.$$.fragment,r),r.forEach(_),a=g(e),i=h(e,"LABEL",{});var f=v(i);m=h(f,"INPUT",{type:!0}),p=g(f),fe.l(f),f.forEach(_),w=g(e),P=h(e,"DIV",{class:!0});var $=v(P);V=h($,"BUTTON",{});var b=v(V);B=y(b,"🌊 add oscillator"),b.forEach(_),L=g($),U(S.$$.fragment,$),$.forEach(_),C=g(e),Y=h(e,"UL",{});var T=v(Y);for(let t=0;t<ne.length;t+=1)ne[t].l(T);T.forEach(_),Q=g(e),W=h(e,"UL",{});var x=v(W);for(let t=0;t<le.length;t+=1)le[t].l(x);x.forEach(_),this.h()},h(){n.disabled=r=!e[12],s.disabled=c=!e[12],N(s,"selected",e[10]),b(t,"class","main-controls svelte-uqd543"),b(m,"type","text"),b(P,"class","add-sources svelte-uqd543")},m(r,c){T(r,t,c),x(t,n),oe.m(n,null),x(t,l),x(t,s),me.m(s,null),x(t,u),k(o,t,null),T(r,a,c),T(r,i,c),x(i,m),z(m,e[0]),x(i,p),fe.m(i,null),T(r,w,c),T(r,P,c),x(P,V),x(V,B),x(P,L),k(S,P,null),T(r,C,c),T(r,Y,c);for(let e=0;e<ne.length;e+=1)ne[e].m(Y,null);T(r,Q,c),T(r,W,c);for(let e=0;e<le.length;e+=1)le[e].m(W,null);X=!0,Z||(ee=[E(n,"click",e[23]),E(s,"click",e[24]),E(m,"input",e[27]),E(V,"click",e[28])],Z=!0)},p(e,t){ue!==(ue=ce(e))&&(oe.d(1),oe=ue(e),oe&&(oe.c(),oe.m(n,null))),(!X||4096&t[0]&&r!==(r=!e[12]))&&(n.disabled=r),ie!==(ie=ae(e))&&(me.d(1),me=ie(e),me&&(me.c(),me.m(s,null))),(!X||4096&t[0]&&c!==(c=!e[12]))&&(s.disabled=c),1024&t[0]&&N(s,"selected",e[10]);const l={};32&t[0]&&(l.volume=e[5]),64&t[0]&&(l.muted=e[6]),64&t[0]&&(l.mute=e[25]),64&t[0]&&(l.unmute=e[26]),o.$set(l),1&t[0]&&m.value!==e[0]&&z(m,e[0]),de===(de=pe(e))&&fe?fe.p(e,t):(fe.d(1),fe=de(e),fe&&(fe.c(),fe.m(i,null)));const u={};!R&&16&t[0]&&(R=!0,u.mic_stream=e[4],H((()=>R=!1))),S.$set(u),65538&t[0]&&(ve=e[1],M(),ne=K(ne,t,ge,1,e,ve,re,Y,J,dt,null,lt),j()),131200&t[0]&&(ye=e[7],M(),le=K(le,t,_e,1,e,ye,se,W,J,ft,null,rt),j())},i(e){if(!X){I(o.$$.fragment,e),I(S.$$.fragment,e);for(let e=0;e<ve.length;e+=1)I(ne[e]);for(let e=0;e<ye.length;e+=1)I(le[e]);X=!0}},o(e){A(o.$$.fragment,e),A(S.$$.fragment,e);for(let t=0;t<ne.length;t+=1)A(ne[t]);for(let t=0;t<le.length;t+=1)A(le[t]);X=!1},d(e){e&&_(t),oe.d(),me.d(),D(o),e&&_(a),e&&_(i),fe.d(),e&&_(w),e&&_(P),D(S),e&&_(C),e&&_(Y);for(let t=0;t<ne.length;t+=1)ne[t].d();e&&_(Q),e&&_(W);for(let t=0;t<le.length;t+=1)le[t].d();Z=!1,O(ee)}}}function ut(e){let t;return{c(){t=$("▶️ play all")},l(e){t=y(e,"▶️ play all")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function ot(e){let t;return{c(){t=$("⏸︎ pause all")},l(e){t=y(e,"⏸︎ pause all")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function at(e){let t;return{c(){t=$("⏺︎ start recording")},l(e){t=y(e,"⏺︎ start recording")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function it(e){let t;return{c(){t=$("⏹ stop recording")},l(e){t=y(e,"⏹ stop recording")},m(e,n){T(e,t,n)},d(e){e&&_(t)}}}function mt(e){let t;return{c(){t=$("mime type")},l(e){t=y(e,"mime type")},m(e,n){T(e,t,n)},p:w,d(e){e&&_(t)}}}function pt(e){let t;return{c(){t=$(e[11])},l(n){t=y(n,e[11])},m(e,n){T(e,t,n)},p(e,n){2048&n[0]&&R(t,e[11])},d(e){e&&_(t)}}}function dt(e,t){let n,r,l;function s(){return t[30](t[41])}return r=new Ve({props:{input_channel:t[41],remove:s}}),{key:e,first:null,c(){n=S(),q(r.$$.fragment),this.h()},l(e){n=S(),U(r.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){T(e,n,t),k(r,e,t),l=!0},p(e,n){t=e;const l={};2&n[0]&&(l.input_channel=t[41]),2&n[0]&&(l.remove=s),r.$set(l)},i(e){l||(I(r.$$.fragment,e),l=!0)},o(e){A(r.$$.fragment,e),l=!1},d(e){e&&_(n),D(r,e)}}}function ft(e,t){let n,r,l;function s(){return t[31](t[38])}return r=new Se({props:{clip:t[38],remove:s}}),{key:e,first:null,c(){n=S(),q(r.$$.fragment),this.h()},l(e){n=S(),U(r.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){T(e,n,t),k(r,e,t),l=!0},p(e,n){t=e;const l={};128&n[0]&&(l.clip=t[38]),128&n[0]&&(l.remove=s),r.$set(l)},i(e){l||(I(r.$$.fragment,e),l=!0)},o(e){A(r.$$.fragment,e),l=!1},d(e){e&&_(n),D(r,e)}}}function $t(e){let t,n,r,l;const s=[ct,st],c=[];function u(e,t){return e[8]?0:1}return t=u(e),n=c[t]=s[t](e),{c(){n.c(),r=S()},l(e){n.l(e),r=S()},m(e,n){c[t].m(e,n),T(e,r,n),l=!0},p(e,l){let o=t;t=u(e),t===o?c[t].p(e,l):(M(),A(c[o],1,1,(()=>{c[o]=null})),j(),n=c[t],n?n.p(e,l):(n=c[t]=s[t](e),n.c()),I(n,1),n.m(r.parentNode,r))},i(e){l||(I(n),l=!0)},o(e){A(n),l=!1},d(e){c[t].d(e),e&&_(r)}}}function ht(e,t,n){let r,l,s,c,u,o,a,i="audio/webm;codecs=opus",m=[],p=[],d=!1,f=1,$=!1;const h=[];let v=!1;const g=(e,t)=>{const r=We(e);n(1,m=m.concat(r));const l=et(e);r.set_source(l),r.connect(t)},y=e=>{e.pause(),n(1,m=m.filter((t=>t!==e)))},_=e=>{e.forEach((e=>e.pause())),n(1,m=m.filter((t=>!e.includes(t))))},b=e=>{n(7,p=p.filter((t=>t!==e)))};let T=!0,x=!1;const E=()=>{n(9,T=!0);for(const e of m)e.play()},w=()=>{n(9,T=!1);for(const e of m)e.pause()},O=()=>{n(10,x=!0),o.start()},N=()=>{n(10,x=!1),o.stop()};return e.$$.update=()=>{1&e.$$.dirty[0]&&n(11,r=MediaRecorder.isTypeSupported(i)?null:"mime type is not supported"),4194332&e.$$.dirty[0]&&(a?(n(22,d=!0),(async(e,t,r)=>{const l=We(e);n(1,m=[l,...m]);const s=nt(e,r);l.set_source(s),l.connect(t),l.play(),l.set_volume(1)})(s,c,a)):d&&_(m.filter((e=>{var t;return"mic"===(null==(t=Y(e).source)?void 0:t.type)})))),18&e.$$.dirty[0]&&n(12,l=!!m.length||!!a),104&e.$$.dirty[0]&&(null==c||c.gain.setValueAtTime($?0:Q(f),0))},[i,m,s,c,a,f,$,p,v,T,x,r,l,e=>{n(5,f=e)},()=>{n(2,s=new AudioContext),u=s.createMediaStreamDestination(),n(3,c=s.createGain()),c.connect(u),c.connect(s.destination),o=new MediaRecorder(u.stream,{mimeType:i}),o.ondataavailable=e=>{console.log("recorder.ondataavailable",e),h.push(e.data)},o.onstop=e=>{console.log("recorder.onstop",e),n(7,p=p.concat(C(((e,t)=>{const n=Je();return{id:n,name:t||n,blob:e}})(new Blob(h,{type:i}))))),h.length=0},g(s,c),n(8,v=!0)},g,y,b,E,w,O,N,d,()=>T?w():E(),()=>x?N():O(),()=>n(6,$=!0),()=>n(6,$=!1),function(){i=this.value,n(0,i)},()=>g(s,c),function(e){a=e,n(4,a)},e=>y(e),e=>b(e)]}class vt extends i{constructor(e){super(),m(this,e,ht,$t,p,{},[-1,-1])}}function gt(e){let t,n,r,l,s,c;return s=new vt({}),{c(){t=d("main"),n=d("h1"),r=$("earworm🪱"),l=f(),q(s.$$.fragment),this.h()},l(e){t=h(e,"MAIN",{class:!0});var c=v(t);n=h(c,"H1",{});var u=v(n);r=y(u,"earworm🪱"),u.forEach(_),l=g(c),U(s.$$.fragment,c),c.forEach(_),this.h()},h(){b(t,"class","svelte-lbhzz2")},m(e,u){T(e,t,u),x(t,n),x(n,r),x(t,l),k(s,t,null),c=!0},p:w,i(e){c||(I(s.$$.fragment,e),c=!0)},o(e){A(s.$$.fragment,e),c=!1},d(e){e&&_(t),D(s)}}}export default class extends i{constructor(e){super(),m(this,e,null,gt,p,{})}}
